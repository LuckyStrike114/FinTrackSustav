<Window x:Class="FinTrackSustav.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="FinTrackSustav - Glavni prozor" Height="600" Width="1000"
        Closing="Window_Closing">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header s informacijama o korisniku -->
        <Border Background="#FF2196F3" Padding="10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                <TextBlock Text="{Binding CurrentUser.Name}" 
                           Foreground="White" FontSize="16" Margin="10,0"/>
                <TextBlock Text="{Binding CurrentUser.Email}" 
                           Foreground="White" FontSize="14" Margin="20,0"/>
                <Button Content="Odjava" Click="BtnLogout_Click"/>
            </StackPanel>
        </Border>

        <!-- Informacije o financijskim sredstvima (poravnato desno) -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="569,10,0,10" Grid.Row="1" Width="421">
            <TextBlock Text="Ukupni iznos: " FontWeight="Bold" VerticalAlignment="Center"/>
            <TextBlock x:Name="txtUkupniIznos" Margin="5" VerticalAlignment="Center"/>
            <TextBlock Text="Raspoloživo: " FontWeight="Bold" Margin="20,0,0,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="txtRaspolozivo" Margin="5" VerticalAlignment="Center"/>
            <Button x:Name="btnAllocateFunds" Content="Alociraj sredstva" Width="120" Margin="10,0,0,0" Click="BtnAllocateFunds_Click"/>
        </StackPanel>

        <!-- Tabovi za ciljeve i transakcije -->
        <TabControl Grid.Row="2" Margin="10">
            <TabItem Header="Financijski ciljevi">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <Button x:Name="btnAddGoal" Content="Dodaj cilj" Width="100" Margin="5" Click="BtnAddGoal_Click"/>
                        <Button x:Name="btnEditGoal" Content="Uredi cilj" Width="100" Margin="5" Click="BtnEditGoal_Click"/>
                        <Button x:Name="btnDeleteGoal" Content="Obriši cilj" Width="100" Margin="5" Click="BtnDeleteGoal_Click"/>
                        <Button x:Name="btnCompleteGoal" Content="Završi cilj" Width="100" Margin="5" Click="BtnCompleteGoal_Click"/>
                        <Button x:Name="btnRefreshGoals" Content="Osvježi" Width="80" Margin="5" Click="BtnRefreshGoals_Click"/>
                    </StackPanel>
                    <DataGrid x:Name="dgGoals" Grid.Row="1" AutoGenerateColumns="False" IsReadOnly="True" Margin="5" SelectionChanged="dgGoals_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Naziv cilja" Binding="{Binding GoalName}" Width="*"/>
                            <DataGridTextColumn Header="Ciljni iznos" Binding="{Binding TargetAmount, StringFormat=C}" Width="120"/>
                            <DataGridTextColumn Header="Trenutni iznos" Binding="{Binding CurrentAmount, StringFormat=C}" Width="120"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="Transakcije">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <Button x:Name="btnAddTransaction" Content="Dodaj transakciju" Width="120" Margin="5" Click="BtnAddTransaction_Click"/>
                        <Button x:Name="btnRefreshTransactions" Content="Osvježi" Width="80" Margin="5" Click="BtnRefreshTransactions_Click"/>
                    </StackPanel>
                    <DataGrid x:Name="dgTransactions" Grid.Row="1" AutoGenerateColumns="False" IsReadOnly="True" Margin="5">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Opis" Binding="{Binding Description}" Width="*"/>
                            <DataGridTextColumn Header="Iznos" Binding="{Binding Amount, StringFormat=C}" Width="100"/>
                            <DataGridTextColumn Header="Datum" Binding="{Binding Date, StringFormat=dd.MM.yyyy}" Width="120"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Status bar -->
        <StatusBar Grid.Row="3">
            <StatusBarItem Content="Status:"/>
            <StatusBarItem x:Name="statusBarText" Content="Spremno"/>
        </StatusBar>
    </Grid>
</Window>
